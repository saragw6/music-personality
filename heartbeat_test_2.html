<!DOCTYPE html>

<!--Setup for Bootstrap taken from http://www.w3schools.com/bootstrap/bootstrap_get_started.asp-->

<html lang='en'>
	<head>
		<title>20/20 | Quiz</title>
		<meta charset='utf-8'>
		<meta name='viewport' content='width=device-width, initial-scale=1'>
		<link rel='stylesheet' href='heartbeat_test_2.css'>
		<link rel='stylesheet' href='http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css'>
		<script src='https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js'></script>
		<script src='http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js'></script>
		<script src='http://code.jquery.com/jquery-2.1.4.min.js'></script>
	<!--	<script src = 'heartbeat_test_2.js'> </script>	-->
	</head>

	<body>
<!-- 		<audio id = 'feist'  loop>
			<source src = 'tracks/heartbeat_audio.mp3' type = 'audio/mpeg'>
		</audio> -->

<!--		<div id='container'>	-->

<!-- 		<audio id='viz_audio'>
			<source src='/tracks/heartbeat_audio.mp3' type='audio/mpeg'>
			

		</audio> -->

			<!-- make canvas -->
			<canvas id="myCanvas" width="200" height="100" style="border:1px solid #000000;">
			</canvas>

			<script type='text/javascript'>
				$(document).ready(function() {
					var audio = document.createElement('audio');
					audio.setAttribute('src', 'heartbeat_audio.mp3');
					audio.setAttribute('autoplay', 'autoplay');

					$.get();

					audio.addEventListener('load', function() {
						audio.play();
					}, true);
				})
				document.write('Hello\n');

				var WIDTH = 640;
				var HEIGHT = 360;
				var SMOOTHING = 0.8;
				var FFT_SIZE = 2048;

				var Feist = null;

				//  get canvas and 2d context
				var canvas = document.getElementById('myCanvas');
				var context;
				//  create an AudioContext
				//  (can support multiple sound inputs and complex audio graphs)
				window.addEventListener('load', init, false);
				function init() {
					try {
						// fix up for prefixing
						window.AudioContext = window.AudioContext || window.webkitAudioContext;
						context = new AudioContext();
					}
					catch (error) {
						alert('Web Audio API is not supported in this browser');
					}
				}
				//  load a sound sample

'https://soundcloud.com/feist-1/how-come-you-never-go-there-2'

				// var context = canvas.getContext("2d");

				// // var audioCtx = new (window.AudioContext || window.webkitAudioContext)();
				// var audioCtx = new AudioContext() || new webkitAudioContext();
				// var analyser = audioCtx.createAnalyser();

				// //  specify how many data points we will be collecting, for that
				// //  fft size, and set up buffer
				// //  FrequencyBinCount == length of array
				// analyser.fftSize = FFT_SIZE;
				// analyser.smoothingTimeConstant = SMOOTHING;
				// var bufferLength = analyser.frequencyBinCount;
				// var dataArray = new Uint8Array(bufferLength);

				// //  actually retrieve the data and copy it into our array
				// analyser.getByteTimeDomainData(dataArray);
				// //  now, we have the audio data for that moment in time in our array!
				// //  and can plot/vizualize it as we like

				// //  ===========================================================
				// //  clear the canvas of previous drawing to ready for new
				// context.clearRect(0, 0, WIDTH, HEIGHT);

				// function draw() {
				// 	//  loop the drawing function once it's been started
				// 	drawVisual = requestAnimationFrame(draw);
				// 	//  grab the time domain data and copy it to our array
				// 	analyser.getByteTimeDomainData(dataArray);
				// 	//  fill canvas with solid color to begin
				// 	context.fillStyle = 'rgb(200, 200, 200)';
				// 	context.fillRect(0, 0, WIDTH, HEIGHT);
				// 	//  set wave's line width and stroke color
				// 	//  begin drawing that path
				// 	context.lineWidth = 2;
				// 	context.strokeStyle = 'rgb(0, 0, 0)';
				// 	context.beginPath();
				// 	//  determine width of each segment of line drawn by doing
				// 	//    canvas width/array length (= to FrequencyBinCount)
				// 	//  then make a var (x) to define pos to move to for
				// 	//    drawing each line segment
				// 	var sliceWidth = WIDTH * 1.0 / bufferLength;
				// 	var x = 0;
				// 	//  loop thru, defining pos of each small segment of wave
				// 	//    for each point in buffer(array) at a certain height
				// 	//    based on data point value from the array,
				// 	//    then moving the line across to pos of next wave
				// 	//    segment drawing
				// 	for (var i = 0; i < bufferLength; i++) {
				// 		var v = dataArray[i] / 128.0;
				// 		var y = v * HEIGHT/2;

				// 		if (i == 0) {
				// 			context.moveTo(x, y);
				// 		} else {
				// 			context.lineTo(x, y);
				// 		}
				// 		x += sliceWidth;
				// 	}
				// 	//  finish the line in middle of right-hand side of canvas
				// 	//  then draw the stroke we defined
				// 	context.lineTo(canvas.width, canvas.height/2);
				// 	context.stroke();
				// }
				// draw();



			</script>
<!--		</div>	-->
	</body>
</html>




















